---
title: 斐波纳契数
tags: [前端, javascript, 算法]
categories: 前端
date: 2019-04-02 11:38:47
---

## 斐波纳契数

在数学中，斐波纳契数是下面整数序列，称为 Fibonacci 序列，其特征在于,前两个之后的每个数字都是两者之和

`0,1,1,2,3,5,8,13,21,34,55,89,144，......`

<!-- more -->

带有正方形的平铺，其边长是连续的斐波纳契数

![斐波那契](https://upload.wikimedia.org/wikipedia/commons/d/db/34%2A21-FibonacciBlocks.png)

Fibonacci 螺旋：通过绘制连接 Fibonacci 平铺中正方形的相对角的圆弧形成的金色螺旋的近似值; [4]这个使用尺寸为 1,1,2,3,5,8,13 和 21 的正方形。

![Fibonacci Spiral](https://upload.wikimedia.org/wikipedia/commons/2/2e/FibonacciSpiral.svg)

## 算法

```js
/**
 * 以数组形式返回斐波那契序列。
 *
 * @param n
 * @return {number[]}
 */
export default function fibonacci(n) {
  const fibSequence = [1];

  let currentValue = 1;
  let previousValue = 0;

  if (n === 1) {
    return fibSequence;
  }

  let iterationsCounter = n - 1;

  while (iterationsCounter) {
    currentValue += previousValue;
    previousValue = currentValue - previousValue;

    fibSequence.push(currentValue);

    iterationsCounter -= 1;
  }

  return fibSequence;
}
```

```js
/**
 * 用动态规划方法计算特定位置的斐波那契数。
 *
 * @param n
 * @return {number}
 */
export default function fibonacciNth(n) {
  let currentValue = 1;
  let previousValue = 0;

  if (n === 1) {
    return 1;
  }

  let iterationsCounter = n - 1;

  while (iterationsCounter) {
    currentValue += previousValue;
    previousValue = currentValue - previousValue;

    iterationsCounter -= 1;
  }

  return currentValue;
}
```

```js
/**
 * 用闭式函数（binet公式）计算特定位置的斐波那契数。
 * 参考: https://en.wikipedia.org/wiki/Fibonacci_number#Closed-form_expression
 *
 * @param {number} position - 斐波那契序列的位置号（必须是1到75之间的数字）。
 * @return {number}
 */
export default function fibonacciClosedForm(position) {
  const topMaxValidPosition = 75;

  // 检查位置是否有效。
  if (position < 1 || position > topMaxValidPosition) {
    throw new Error(
      `Can't handle position smaller than 1 or greater than ${topMaxValidPosition}`
    );
  }

  // 计算√5，在进一步公式中重复使用。
  const sqrt5 = Math.sqrt(5);
  // 计算φ常数（≈1.61803）。
  const phi = (1 + sqrt5) / 2;

  // 用比奈公式计算斐波那契数。
  return Math.floor(phi ** position / sqrt5 + 0.5);
}
```

## 参考文献

- [维基百科](https://en.wikipedia.org/wiki/Fibonacci_number)

_摘自：https://github.com/trekhleb/javascript-algorithms_

\*_每天进步一点点_
